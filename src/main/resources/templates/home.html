<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>WIDU - í™ˆ</title>
    <link rel="stylesheet" href="css/home.css" />
    <link rel="stylesheet" href="css/header.css" />
    <link rel="stylesheet" href="css/couple_info.css" />

</head>
<body>
<!-- ìƒë‹¨ë°” -->
<div id="header-container"></div>

<!-- ë³¸ë¬¸ -->
<main class="main-container">
    <!-- ì™¼ìª½ ì˜ì—­ -->
    <section class="left-section">
        <div class="cover-box" onclick="openPopup()">
        <div class="cover-img-wrapper">
                <img src="images/couple.jpg" alt="ì»¤í”Œ ì»¤ë²„" class="couple-img"/>
                <div class="d-day">ğŸ’• D+100</div>
            </div>
        </div>

        <div class="add-post" onclick="location.href='post.html'">ï¼‹ ê²Œì‹œë¬¼ ì¶”ê°€</div>
        <div class="feed">
            <div class="user-id">@id</div>
            <div class="feed-box">
                <img src="images/feed.jpg" alt="í”¼ë“œ ì´ë¯¸ì§€" class="feed-img"/>
                <p class="feed-text">ì…€ì¹´ í•œì¥~</p>
            </div>
        </div>
    </section>

    <!-- ì˜¤ë¥¸ìª½ ì˜ì—­ -->
    <section class="right-section">
        <div class="schedule-title">ì˜¤ëŠ˜ì˜ ì¼ì •</div>
        <div class="schedule-box">âœ” ì»¤í”Œ ë°ì´íŠ¸</div>
        <div class="schedule-title">ë‚´ì¼ì˜ ì¼ì •</div>
        <div class="schedule-box">âœ” ì˜í™” ë³´ê¸°</div>
    </section>
</main>

<!-- ì¶”ê°€: ì»¤í”Œ ì •ë³´ ìˆ˜ì • íŒì—… HTML -->
<div id="couple-popup" class="popup-overlay hidden">
    <div class="popup-box">
        <button class="popup-close" onclick="closePopup()">&times;</button>

        <h2>ì»¤í”Œ ì •ë³´ ìˆ˜ì •</h2>

        <div class="form-group">
            <label for="couple-name">ì»¤í”Œ ì´ë¦„</label>
            <input type="text" id="couple-name" placeholder="ì»¤í”Œ ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”" />
        </div>

        <div class="form-group">
            <label for="cover-img">ì»¤ë²„ ì´ë¯¸ì§€</label>
            <input type="file" id="cover-img" accept="image/*" />
        </div>

        <div class="form-group">
            <label for="d-day-name">ë””ë°ì´ ì´ë¦„</label>
            <input type="text" id="d-day-name" placeholder="ì˜ˆ: ì²« ë§Œë‚¨" />
        </div>

        <div class="form-group">
            <label for="d-day-type">í˜•ì‹</label>
            <select id="d-day-type">
                <option value="d+">D+</option>
                <option value="d-">D-</option>
            </select>
        </div>

        <div class="form-group">
            <label for="d-day-date">ë‚ ì§œ</label>
            <input type="date" id="d-day-date" />
        </div>

        <button class="add-btn">+ ë””ë°ì´ ì¶”ê°€</button>
        <button class="save-btn">ì €ì¥</button>
    </div>
</div>

<!-- header ë¶ˆëŸ¬ì˜¤ê¸° -->
<script>
    fetch('header.html')
        .then(res => res.text())
        .then(data => {
            document.getElementById('header-container').innerHTML = data;

            const script = document.createElement('script');
            script.src = 'js/chat.js';
            script.onload = function () {
                // chat.js ë¡œë“œ ì™„ë£Œ í›„ í•¨ìˆ˜ í˜¸ì¶œ
                if (typeof initChatPopup === 'function') {
                    initChatPopup();
                }
            };
            document.body.appendChild(script);
        });
</script>

<!--ì»¤í”Œ ì •ë³´ ìˆ˜ì • íŒì—…-->
<script>
    function openPopup() {
        document.getElementById("couple-popup").classList.remove("hidden");
    }

    function closePopup() {
        document.getElementById("couple-popup").classList.add("hidden");
    }
</script>

<!-- ì˜¤ë¥¸ìª½ ì˜ì—­ ìŠ¤í¬ë¡¤ -->
<script>
    const rightSection = document.querySelector('.right-section');
    let currentTop = 0;
    let targetTop = 0;

    // ì• ë‹ˆë©”ì´ì…˜ ë£¨í”„
    function animate() {
        currentTop += (targetTop - currentTop) * 0.9; // ì ì§„ì  ì´ë™
        rightSection.style.transform = `translateY(${currentTop}px)`;
        requestAnimationFrame(animate);
    }

    // ìŠ¤í¬ë¡¤ì— ë”°ë¼ ëª©í‘œ ìœ„ì¹˜ ì„¤ì •
    function updateTargetTop() {
        const windowScroll = window.scrollY;
        const windowHeight = window.innerHeight;
        const sectionOffset = rightSection.offsetTop;
        const sectionHeight = rightSection.offsetHeight;

        // ê°€ìš´ë°ì— ì˜¤ë„ë¡ ëª©í‘œ ìœ„ì¹˜ ê³„ì‚°
        targetTop = windowScroll + windowHeight / 2 - sectionHeight / 2 - sectionOffset;
    }

    window.addEventListener('scroll', updateTargetTop);

    // ì´ˆê¸°ì— í•œ ë²ˆ ê³„ì‚°
    updateTargetTop();
    animate(); // ì• ë‹ˆë©”ì´ì…˜ ì‹œì‘
</script>

</body>
</html>
